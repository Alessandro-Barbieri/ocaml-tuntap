<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tuntap (tuntap.Tuntap)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">tuntap</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Tuntap</span></h1></header><p>Module for dealing with TUN/TAP devices. TUN refers to layer 3
virtual interfaces whereas TAP refers to layer 2 ones.</p><div class="spec val" id="val-opentun"><a href="#val-opentun" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>opentun : ?&#8288;pi:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;persist:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;user:int <span class="keyword">&#8209;&gt;</span> ?&#8288;group:int <span class="keyword">&#8209;&gt;</span> ?&#8288;devname:string <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> Unix.file_descr<span class="keyword"> * </span>string</code></div><div class="doc"><p><code class="code">opentun ~pi ~persist ~user ~group ~devname ()</code> will create a TUN
interface. If <code class="code">devname</code> is specified, or if <code class="code">devname</code> specify an
unexistant device, a new device will be created, otherwise, the
interface <code class="code">devname</code> will be opened. <code class="code">no_pi</code> is to indicate if you
want packet information associated with your frames (tap) or
packets (tun) (defaults to no information). <code class="code">persist</code> will set the
device persistent with permissions set to <code class="code">user</code> and <code class="code">group</code> if
supported by your OS (currently MacOSX does not support it). The
return value is a pair consisting of a fd opened on the freshly
created interface, and its name as will be displayed by command
<code class="code">ifconfig</code> for example.</p></div></div><div class="spec val" id="val-opentap"><a href="#val-opentap" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>opentap : ?&#8288;pi:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;persist:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;user:int <span class="keyword">&#8209;&gt;</span> ?&#8288;group:int <span class="keyword">&#8209;&gt;</span> ?&#8288;devname:string <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> Unix.file_descr<span class="keyword"> * </span>string</code></div><div class="doc"><p>Like <code class="code">opentun</code>, but open TAP interfaces instead of TUN ones.</p></div></div><div class="spec val" id="val-closetun"><a href="#val-closetun" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>closetun : string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">closetun devname kind</code> will destroy <code class="code">devname</code>, if it exists.</p></div></div><div class="spec val" id="val-closetap"><a href="#val-closetap" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>closetap : string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Like <code class="code">closetun</code>, but for TAP interfaces.</p></div></div><div class="spec val" id="val-get_ifnamsiz"><a href="#val-get_ifnamsiz" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_ifnamsiz : unit <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p><code class="code">get_ifnamsiz ()</code> is the value of the constant IFNAMSIZ,
defined in &lt;net/if.h&gt;. Useful for allocating buffers that contain
interface names.</p></div></div><div class="spec val" id="val-get_macaddr"><a href="#val-get_macaddr" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_macaddr : string <span class="keyword">&#8209;&gt;</span> Macaddr.t</code></div><div class="doc"><p><code class="code">get_hwaddr devname</code> is the MAC address of interface
<code class="code">devname</code>, as a raw string (not hexa).</p></div></div><div class="spec val" id="val-set_ipv4"><a href="#val-set_ipv4" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_ipv4 : ?&#8288;netmask:Ipaddr.V4.Prefix.t <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> Ipaddr.V4.t <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">set_ipv4 ~netmask dev ipaddr</code> assigns an <code class="code">ipaddr</code> to interface
<code class="code">dev</code>, with associated netmask <code class="code">netmask</code> if specified. If
unspecified, the kernel will assign a default netmask
automatically.</p></div></div><div class="spec val" id="val-set_up_and_running"><a href="#val-set_up_and_running" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_up_and_running : string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">set_up_and_running devname</code> sets interface <code class="code">devname</code> up and
running. Note that when using the <code class="code">set_ipv4</code> function, the
interface will automatically be set up and running.</p></div></div><div class="spec val" id="val-getifaddrs"><a href="#val-getifaddrs" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>getifaddrs : unit <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>[ `V4 of Ipaddr.V4.t<span class="keyword"> * </span>Ipaddr.V4.Prefix.t | `V6 of Ipaddr.V6.t<span class="keyword"> * </span>Ipaddr.V6.Prefix.t ]) list</code></div><div class="doc"><p><code class="code">getifaddrs ()</code> is the list that associates interface names with
IP addresses and prefix. Only interfaces that have an IP address
assigned are returned.</p></div></div><div class="spec val" id="val-getifaddrs_v4"><a href="#val-getifaddrs_v4" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>getifaddrs_v4 : unit <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>(Ipaddr.V4.t<span class="keyword"> * </span>Ipaddr.V4.Prefix.t)) list</code></div><div class="doc"><p>Same as <code class="code">getifaddrs</code> but only return interfaces that have an IPv4
assigned.</p></div></div><div class="spec val" id="val-getifaddrs_v6"><a href="#val-getifaddrs_v6" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>getifaddrs_v6 : unit <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>(Ipaddr.V6.t<span class="keyword"> * </span>Ipaddr.V6.Prefix.t)) list</code></div><div class="doc"><p>Same as <code class="code">getifaddrs</code> but only return interfaces that have an IPv6
assigned.</p></div></div><div class="spec val" id="val-addrs_of_ifname"><a href="#val-addrs_of_ifname" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>addrs_of_ifname : string <span class="keyword">&#8209;&gt;</span> [ `V4 of Ipaddr.V4.t<span class="keyword"> * </span>Ipaddr.V4.Prefix.t | `V6 of Ipaddr.V6.t<span class="keyword"> * </span>Ipaddr.V6.Prefix.t ] list</code></div><div class="doc"><p><code class="code">addrs_of_ifname ifname</code> is the list of IP addresses and their
prefixes associated to interface <code class="code">ifname</code>.</p></div></div><div class="spec val" id="val-v4_of_ifname"><a href="#val-v4_of_ifname" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>v4_of_ifname : string <span class="keyword">&#8209;&gt;</span> (Ipaddr.V4.t<span class="keyword"> * </span>Ipaddr.V4.Prefix.t) list</code></div><div class="doc"><p><code class="code">v4_of_ifname ifname</code> is the list of IPv4 addresses and their
prefixes associated to interface <code class="code">ifname</code>.</p></div></div><div class="spec val" id="val-v6_of_ifname"><a href="#val-v6_of_ifname" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>v6_of_ifname : string <span class="keyword">&#8209;&gt;</span> (Ipaddr.V6.t<span class="keyword"> * </span>Ipaddr.V6.Prefix.t) list</code></div><div class="doc"><p><code class="code">v6_of_ifname ifname</code> is the list of IPv6 addresses and their
prefixes associated to interface <code class="code">ifname</code>.</p></div></div></body></html>